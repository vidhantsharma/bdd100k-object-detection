# ============================================================================
# BDD100K Object Detection - Configuration
# ============================================================================

# Global Settings
global:
  logging:
    level: INFO

# Data Paths
data:
  root: "data/subset"  # Use subset (1000 train, 200 val) or "data/raw" for full dataset
  output_dir: "data"

# Analysis Configuration
analysis:
  outlier_detection:
    top_k: 3  # Number of outliers per class for visualization

# Model Configuration
model:
  pretrained: true  # true = fine-tune from COCO, false = train from scratch
  num_classes: 10
  backbone:
    trainable_layers: 3  # Number of trainable ResNet layers (0-5)

# Training Configuration
training:
  batch_size: 2
  num_epochs: 10
  learning_rate: 0.005
  optimizer: "sgd"  # Options: "sgd", "adam", "adamw"
  momentum: 0.9
  weight_decay: 0.0005
  gradient_accumulation_steps: 2
  
  # Class imbalance handling
  use_class_weights: true
  use_weighted_sampling: true
  
  # Learning rate scheduler
  scheduler:
    type: "step"  # Options: "step", "multistep", "cosine", "plateau", "none"
    step_size: 3
    gamma: 0.1
  
  # Data loading
  num_workers: 4
  min_bbox_area: 16
  
  # Logging
  log_interval: 10
  save_interval: 1

# Evaluation Configuration
evaluation:
  batch_size: 4
  num_workers: 4
  iou_threshold: 0.5          # IoU threshold for matching predictions to ground truth (0.5 = mAP@0.5)
  confidence_threshold: 0.05  # Min confidence score to keep predictions (lower = more detections, higher recall)
